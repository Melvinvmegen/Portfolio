{"ast":null,"code":"import _objectSpread from\"/home/melvin/code/Melvinvmegen/melvinvmegen.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/melvin/code/Melvinvmegen/melvinvmegen.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/melvin/code/Melvinvmegen/melvinvmegen.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/melvin/code/Melvinvmegen/melvinvmegen.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/melvin/code/Melvinvmegen/melvinvmegen.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/melvin/code/Melvinvmegen/melvinvmegen.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Button from'../FormSubmit/FormSubmit';import Input from\"../Input/Input\";import axios from'../../axios-contacts';import classes from'./Newsletter.module.css';import Spinner from\"../Spinner/Spinner\";var Newsletter=/*#__PURE__*/function(_Component){_inherits(Newsletter,_Component);function Newsletter(){var _getPrototypeOf2;var _this;_classCallCheck(this,Newsletter);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Newsletter)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={sent:false,orderForm:{email:{elementType:'input',elementConfig:{type:'email',placeholder:'Email@gmail.com'},value:'',validation:{required:true,isEmail:true},valid:false,touched:false}},formIsValid:false};_this.inputChangedHandler=function(event,inputIdentifier){var form=_objectSpread({},_this.state.orderForm);var updatedFormElement=_objectSpread({},form[inputIdentifier]);updatedFormElement.value=event.target.value;updatedFormElement.valid=_this.checkValidity(updatedFormElement.value,updatedFormElement.validation);updatedFormElement.touched=true;form[inputIdentifier]=updatedFormElement;var formIsValid=true;for(var _inputIdentifier in form){formIsValid=form[_inputIdentifier].valid&&formIsValid;}_this.setState({orderForm:form,formIsValid:formIsValid});};_this.contactHandler=function(event){event.preventDefault();var formData={};for(var formElement in _this.state.orderForm){formData[formElement]=_this.state.orderForm[formElement].value;}var contact={contactData:formData};axios.post('/newsletter.json',contact).then(function(response){_this.setState({sent:true});}).catch(function(error){_this.setState({sent:false});});};return _this;}_createClass(Newsletter,[{key:\"checkValidity\",value:function checkValidity(value,rules){var isValid=true;if(rules.required){isValid=value.trim()!==''&&isValid;}if(rules.isEmail){var pattern=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;isValid=pattern.test(value)&&isValid;}return isValid;}},{key:\"render\",value:function render(){var _this2=this;var formElementsArray=[];for(var key in this.state.orderForm){formElementsArray.push({id:key,config:this.state.orderForm[key]});}return React.createElement(\"div\",{className:\"footer-newsletter d-none d-sm-block\"},React.createElement(\"p\",{className:\"menu-item-newsletter\"},React.createElement(\"span\",null,\"Rejoingnez ma newsletter\")),React.createElement(\"form\",{onSubmit:this.contactHandler,className:classes.newsletterForm},formElementsArray.map(function(formElement){return React.createElement(Input,{key:formElement.id,elementType:formElement.config.elementType,elementConfig:formElement.config.elementConfig,value:formElement.config.value,changed:function changed(event){return _this2.inputChangedHandler(event,formElement.id);},invalid:!formElement.config.valid,shouldValidate:formElement.config.validation,touched:formElement.config.touched,classInput:classes.newsletterInput,classDiv:classes.newsletterDiv,validationClass:classes.validationClass});}),React.createElement(Button,{wrapperClass:classes.wrapperBtnForm,btnClass:classes.btnNewsletter,id:classes.submitForm,action:\"S'inscrire\",formIsValid:this.state.formIsValid})),this.state.sent?React.createElement(\"div\",{className:classes.Flash},React.createElement(\"span\",null,React.createElement(\"strong\",null,\"Yay!\"),\" \\uD83C\\uDF89 Vous voil\\xE0 inscris \\xE0 ma newsletter !\")):null);}}]);return Newsletter;}(Component);export default Newsletter;","map":{"version":3,"sources":["/home/melvin/code/Melvinvmegen/melvinvmegen.github.io/src/Components/Newsletter/Newsletter.js"],"names":["React","Component","Button","Input","axios","classes","Spinner","Newsletter","state","sent","orderForm","email","elementType","elementConfig","type","placeholder","value","validation","required","isEmail","valid","touched","formIsValid","inputChangedHandler","event","inputIdentifier","form","updatedFormElement","target","checkValidity","setState","contactHandler","preventDefault","formData","formElement","contact","contactData","post","then","response","catch","error","rules","isValid","trim","pattern","test","formElementsArray","key","push","id","config","newsletterForm","map","newsletterInput","newsletterDiv","validationClass","wrapperBtnForm","btnNewsletter","submitForm","Flash"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Button from '../FormSubmit/FormSubmit'\nimport Input from \"../Input/Input\"\nimport axios from '../../axios-contacts'\nimport classes from './Newsletter.module.css'\nimport Spinner from \"../Spinner/Spinner\";\n\n\nclass Newsletter extends Component {\n  state = {\n    sent: false,\n    orderForm: {\n      email: {\n        elementType: 'input',\n        elementConfig: {\n          type: 'email',\n          placeholder: 'Email@gmail.com'\n        },\n        value: '',\n        validation: {\n          required: true,\n          isEmail: true\n        },\n        valid: false,\n        touched: false\n      }\n    },\n    formIsValid: false\n  }\n\n  inputChangedHandler = (event, inputIdentifier) => {\n    const form = {\n      ...this.state.orderForm\n    };\n    const updatedFormElement = {\n      ...form[inputIdentifier]\n    };\n    updatedFormElement.value = event.target.value;\n    updatedFormElement.valid = this.checkValidity(updatedFormElement.value, updatedFormElement.validation);\n    updatedFormElement.touched = true;\n    form[inputIdentifier] = updatedFormElement\n    let formIsValid = true;\n    for (let inputIdentifier in form) {\n      formIsValid = form[inputIdentifier].valid && formIsValid;\n\n    }\n    this.setState({ orderForm: form, formIsValid: formIsValid })\n  }\n\n  contactHandler = (event) => {\n    event.preventDefault();\n    const formData = {};\n    for (let formElement in this.state.orderForm) {\n      formData[formElement] = this.state.orderForm[formElement].value;\n    }\n    const contact = {\n      contactData: formData\n    }\n    axios.post('/newsletter.json', contact)\n      .then(response => {\n        this.setState({ sent: true })\n      })\n      .catch(error => {\n        this.setState({ sent: false })\n      });\n  }\n\n  checkValidity(value, rules) {\n    let isValid = true;\n\n    if (rules.required) {\n      isValid = value.trim() !== '' && isValid;\n    }\n\n    if (rules.isEmail) {\n      const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\n      isValid = pattern.test(value) && isValid\n    }\n    return isValid\n  }\n\n  render() {\n    const formElementsArray = []\n    for (let key in this.state.orderForm) {\n      formElementsArray.push({\n        id: key,\n        config: this.state.orderForm[key]\n      })\n    }\n\n    return (\n      <div className=\"footer-newsletter d-none d-sm-block\">\n        <p className=\"menu-item-newsletter\"><span>Rejoingnez ma newsletter</span></p>\n        <form onSubmit={this.contactHandler} className={classes.newsletterForm}>\n          {formElementsArray.map(formElement => (\n            <Input\n              key={formElement.id}\n              elementType={formElement.config.elementType}\n              elementConfig={formElement.config.elementConfig}\n              value={formElement.config.value}\n              changed={(event) => this.inputChangedHandler(event, formElement.id)}\n              invalid={!formElement.config.valid}\n              shouldValidate={formElement.config.validation}\n              touched={formElement.config.touched}\n              classInput={classes.newsletterInput}\n              classDiv={classes.newsletterDiv}\n              validationClass={classes.validationClass} />\n          ))}\n          <Button wrapperClass={classes.wrapperBtnForm} btnClass={classes.btnNewsletter} id={classes.submitForm} action=\"S'inscrire\" formIsValid={this.state.formIsValid} />\n        </form>\n        {this.state.sent ?\n          <div className={classes.Flash}>\n            <span><strong>Yay!</strong> 🎉 Vous voilà inscris à ma newsletter !</span>\n          </div>\n          : null\n        }\n      </div>\n    )\n  }\n}\n\nexport default Newsletter;\n"]},"metadata":{},"sourceType":"module"}